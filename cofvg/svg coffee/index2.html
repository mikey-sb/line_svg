<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    
    <div class="line-container scroll svg-scroll" data-rate="-0.4" data-direction="vertical">
        <svg viewBox="0 0 474 9249" fill="none" preserveAspectRatio="xMidYMax meet">
            <path d="M207 0V1317C202.651 1342.12 231.321 1316.23 275.5 1279C299.519 1269.24 312.981 1269.65 337 1279L353 1292C366.472 1303.54 365.441 1305.88 351 1304L314.5 1295C296.135 1291.44 285.869 1291.48 267.5 1295L248.5 1304C240.345 1310.45 240.135 1314.06 248.5 1320.5C257.007 1326.85 260.904 1328.14 267.5 1329.5C292.884 1333.22 307.116 1332.85 332.5 1329.5C356.636 1322.46 368.198 1317.02 384.5 1304C393.762 1296.45 398.096 1292.19 404 1284.5C407.25 1276.98 408.239 1272.63 404 1264C395.348 1245.97 387.1 1237.05 367 1223C355.701 1216.93 348.112 1215.12 332.5 1214.5C316.439 1213.18 306.713 1213.29 288.5 1214.5C263.018 1216.12 249.872 1218.95 230 1230C215.828 1243.1 212.471 1253.57 212 1276V1311C212.586 1314.12 212.914 1315.88 213.5 1319C213.728 1346.31 222.1 1368.8 240 1411.5C242.887 1420.99 243.856 1426.49 243 1437C242.206 1441.24 240.168 1443.12 235 1446C231.29 1447.92 229.21 1448.11 225.5 1446C223.993 1444.64 223.493 1443.62 223 1441.5V1434C217.991 1427.86 214.224 1429.17 207 1434C201.776 1438.11 199.673 1440.77 197 1446C194.632 1456.61 194.681 1462.86 197 1474.5C205.156 1501.81 215.049 1511.55 235 1526.5C247.853 1533.37 261.5 1535 267.5 1535C273.5 1535 273.255 1529.95 267.5 1523.5C261.745 1517.05 218.03 1484.64 216 1485.5C209.188 1481.61 205.223 1480.36 197 1485.5L188.5 1490.5C178.542 1495.02 172.958 1494.07 163 1490.5C156.317 1487.96 152.363 1488.01 145 1490.5C123.054 1503.85 113.254 1512.43 97.5 1528.5C92.4068 1534.1 93 1538 97.5 1538C103.294 1538.4 106.388 1538.43 111.5 1538C135.387 1535.47 148.478 1535.22 171 1538C190.373 1541.44 198.5 1540.46 212 1538C225.5 1535.54 253.5 1541.5 257 1543.5C260.5 1545.5 263.49 1548.91 260.5 1557C250.606 1572.64 242.201 1579.29 223 1588C215.099 1590.71 210.617 1591.75 202 1588C195.255 1586.31 191.104 1586.31 183 1588C173.926 1590.87 168.256 1591.18 156.5 1588C136.308 1580.3 125.976 1575.06 111.5 1562C99.9472 1552.42 92.4285 1548.79 76.5 1546.5C60.7547 1546.14 52.0594 1546.08 37 1546.5C12.3842 1547.58 -1 1564 3 1573C7 1582 11.2776 1587.63 19 1596C57.3565 1637.87 82.4507 1656.3 134 1679.5C152.142 1686.24 161.937 1685.54 179 1679.5C190.513 1675.37 196.569 1675.9 207 1679.5C219.131 1683.6 225.052 1682.88 235 1679.5C256.274 1673.78 268.607 1668.84 294 1645.5C323.665 1615.19 338.409 1597.04 359.5 1561.5C382.759 1520.11 387.052 1496.9 386.5 1455.5C383.566 1439.24 377.445 1439.7 359.5 1455.5C344.559 1475.78 353.5 1471 332.5 1510C311.5 1549 209.249 1631.77 207 1792V4979.5L187 4999C163.566 5028.03 166 5040 192 5046L214 5050L329 5057.5L348 5061.5C376.02 5067.17 374.18 5070.34 348 5076L292 5081C223.108 5084.88 183.385 5083.5 111 5076L71 5066.5C49.5925 5054.37 51.4631 5048.73 71 5040C88.5294 5033.64 98.0206 5031.49 114.5 5029.5C163.378 5026.92 186.887 5027.29 225.5 5029.5C282.517 5032.32 313.836 5034.04 356 5040C395.096 5043.67 407.676 5051.56 405.5 5081L384 5180L379 5218C377.742 5249.49 386.59 5250.4 409.5 5239.5L438.5 5218C460.298 5192 468.491 5174.79 473 5137.5C475.842 5110.3 470.807 5097.73 448 5081C430.418 5067.86 419.471 5068.68 398.5 5081C375.213 5111.86 368.895 5134.51 364 5180L345 5294.5C333.644 5341.19 321.91 5356.26 292 5364.5L147 5375C113.757 5377.47 99.983 5369.1 87 5331L48 5166C41.7621 5139.8 43 5101 43 5095C43 5089 48 5090 48 5095C48 5100 47.8109 5140.02 54 5166L95 5331C107.664 5363.96 119.706 5370.46 147 5368L195 5364.5C205.412 5363.53 207.615 5367.81 207 5381.5V8807.5H103.5C74.5 8807.5 60 8814.5 60 8844V8863L20 8878L103.5 8903L386 8807.5V8898L103.5 8994L60 8983V8989L20 9002.5L103.5 9030L386 8934.5V9024L103.5 9120.5L60 9108V9116.5L20 9131M20 9131L103.5 9157.5L386 9060V9152.5L103.5 9247.5L20 9223.5V9131Z" stroke="black" stroke-width="4"/>
        </svg>     
    </div>
        

        

    <section class="one">
        <h1 class="scroll" data-rate=".4" data-direction="vertical">brewed coffee</h1>
    </section>

    <section class="two">
        <h1 class="scroll" data-rate=".1" data-direction="vertical"></h1>
        <p></p>
    </section>

    <section>
        <span class="bg-cover-1" ></span>
        <span class="bg-cover-2" ></span>
        <img src="./coff.jpg" alt="coffee" class="img-1">
        <span class="img-cover-1"></span>
        <img src="./coff.jpg" alt="coffee" class="img-2">
        <span class="img-cover-2"></span>
        <img src="./coff.jpg" alt="coffee" class="img-3">
        <span class="img-cover-3"></span>
    </section>
    <div class="alchemy-text">
        <h1 class="alchemy-h1" id="alchemy-h1-1"></h1>
        <h1 class="alchemy-h1" id="alchemy-h1-2"></h1>
        <h1 class="alchemy-h1" id="alchemy-h1-3"></h1>
    </div>

    <script>

        let path = document.querySelector('path');
        let pathLength = path.getTotalLength();

        path.style.strokeDasharray = pathLength + ' ' + pathLength;

        path.style.strokeDashoffset = pathLength;

        window.addEventListener('scroll', () => {

            var scrollPercentage = (document.documentElement.scrollTop + document.body.scrollTop) / (document.documentElement.scrollHeight - document.documentElement.clientHeight);
            var drawLength = pathLength * scrollPercentage;

            path.style.strokeDashoffset = pathLength - drawLength;

            const target = document.querySelectorAll('.scroll');

            var index = 0, length = target.length;
            var offSet = window.pageYOffset;
            var pos = window.pageYOffset * rate;

            for (index; index < length; index++){

                var rate = target[index].dataset.rate;
                var offSet = window.pageYOffset;
                var pos = window.pageYOffset * rate;

                if (index == 0) {

                    const svgTarget = document.querySelector('.svg-scroll');

                    const lineOne = document.getElementById('alchemy-h1-1');
                    const lineTwo = document.getElementById('alchemy-h1-2');
                    const lineThree = document.getElementById('alchemy-h1-3');

                    const activeColor = 'rgba(0, 0, 0, 1)';
                    const hiddenColor = 'rgba(0, 0, 0, 0)';

                    const breakpoint1 = -2620;
                    const breakpoint2 = -2900;
                    const breakpoint3 = -3200;
                    
                    var lineTopBump = 0;
                    var transitionOff = 'none';
                    var transitionOn = 'top 1s ease';

                    console.log(pos)

                    if (pos <= -450 && pos > -1000) {
                        svgTarget.style.setProperty('--transition', transitionOff);
                        lineTopBump = -pos - 450;
                    }

                    if (pos <= -1000 && pos > -1900) {
                        svgTarget.style.setProperty('--transition', transitionOff);
                        lineTopBump = 550;
                    } 
                    if (pos <= -1900 && pos > -3100) {
                        svgTarget.style.setProperty('--transition', transitionOn);
                        lineTopBump = 550;
                    } 
                    if (pos <= -3100 && pos > -3500) {
                        svgTarget.style.setProperty('--transition', transitionOn);
                        lineTopBump = -250;
                    } 
                    if (pos <= -3500 && pos > -4000) {
                        svgTarget.style.setProperty('--transition', transitionOn);
                        lineTopBump = -500;
                    } 
                    if (pos <= -4000 && pos > -6000) {
                        svgTarget.style.setProperty('--transition', transitionOff);
                        lineTopBump = -pos - 4500;
                    } 

                    console.log(pos)

                    const img1 = document.querySelector('.img-1')
                    const img2 = document.querySelector('.img-2')
                    const img3 = document.querySelector('.img-3')

                    if(pos < -1320){
                        img1.style.setProperty('left', '600px');
                    }
                    if(pos < -1735){
                        img2.style.setProperty('left', '-600px');
                    }
                    if(pos < -3150){
                        img3.style.setProperty('top', '8400px');
                    }

                    if (pos > breakpoint1){
                        lineOne.style.setProperty('color', hiddenColor);  
                    }
                    if(pos > breakpoint2){
                        lineTwo.style.setProperty('color', hiddenColor);
                    }
                    if (pos > breakpoint3){
                        lineThree.style.setProperty('color', hiddenColor);
                    }

                    if(pos < breakpoint1){
                        lineOne.style.setProperty('color', activeColor);
                    }
                    if(pos < breakpoint2){
                        lineTwo.style.setProperty('color', activeColor);
                    }
                    if(pos < breakpoint3){
                        lineThree.style.setProperty('color', activeColor);
                    }

                    svgTarget.style.setProperty('--line-top', lineTopBump + 'px'); 
                }

                if (target[index].dataset.direction == 'vertical') {
                    target[index].style.transform = 'translate3d(0px, '+pos+'px, 0px)';

                } else {
                    var posY = window.pageYOffset * target[index].dataset.ratey;

                    target[index].style.transform = 'translate3d('+posX+'px, '+posY+'px, 0px)';
                }
            }
        });
    </script>

</body>
</html>